[{"file_Name":"gmail agent.json","id":"REtZa3eoQQAE5ak4bFaA0","nodes":[{"parameters":{"pollTimes":{"item":[{"mode":"everyX","value":5,"unit":"minutes"}]},"filters":{}},"id":"7c015cf3-f43b-49ae-a281-f6101a45ec4f","name":"Gmail Trigger","type":"n8n-nodes-base.gmailTrigger","position":[368,-48],"typeVersion":1.2,"credentials":{"gmailOAuth2":{"id":"pPxZUvi5v12Nor5z","name":"Gmail account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Tool to read all existing gmail labels","resource":"label","returnAll":true},"id":"6d6b8d4c-bca6-473a-8a9a-cc4effe8c255","name":"Gmail - read labels","type":"n8n-nodes-base.gmailTool","position":[832,176],"webhookId":"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9","typeVersion":2.1,"credentials":{"gmailOAuth2":{"id":"pPxZUvi5v12Nor5z","name":"Gmail account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Tool to read a specific message based on the message ID","operation":"get","messageId":"={{ $fromAI('gmail_message_id', 'id of the gmail message, like 1944fdc33f544369', 'string') }}"},"id":"d1825a5a-be4e-4a8a-bf52-cf5839a17683","name":"Gmail - get message","type":"n8n-nodes-base.gmailTool","position":[992,192],"webhookId":"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9","typeVersion":2.1,"credentials":{"gmailOAuth2":{"id":"pPxZUvi5v12Nor5z","name":"Gmail account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Tool to add label to message","operation":"addLabels","messageId":"={{ $fromAI('gmail_message_id') }}","labelIds":"={{ $fromAI('gmail_categories', 'array of label ids') }}"},"id":"6977a318-abbd-4202-b649-bee6b0a1f7e6","name":"Gmail - add label to message","type":"n8n-nodes-base.gmailTool","position":[1184,192],"webhookId":"7a87b026-1c6e-40e1-a062-aefdd1af1585","typeVersion":2.1,"credentials":{"gmailOAuth2":{"id":"pPxZUvi5v12Nor5z","name":"Gmail account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Tool to create a new label, only use if label does not already exist","resource":"label","operation":"create","name":"={{ $fromAI('new_label_name', 'new label name', 'string' ) }} ","options":{}},"id":"942c467a-8d7c-4193-9534-cb42f2b6b55c","name":"Gmail - create label","type":"n8n-nodes-base.gmailTool","position":[1360,192],"webhookId":"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9","typeVersion":2.1,"credentials":{"gmailOAuth2":{"id":"pPxZUvi5v12Nor5z","name":"Gmail account"}}},{"parameters":{"promptType":"define","text":"=Label the email based on the details below:\n{{ JSON.stringify($json) }}","options":{"systemMessage":"Objective:\nAutomatically categorize incoming emails based on existing Gmail labels or create a new label if none match.\n\nTools:\n- Get message\n- Read all labels\n- Create label\n- Assign label to message\n\nInstructions:\n\nLabel Matching:\n\nAnalyze the email's subject, sender, recipient, keywords, and content.\nCompare with existing Gmail labels to find the most relevant match.\nLabel Assignment:\n\nAssign the email to the most appropriate existing label.`\nRemove the inbox label if the email is of less importance (like ads, promotions, aka \"Reclame\"), keep normal and important emails in the inbox.\nIf no suitable label exists, create a new label based on the existing labels. Try reusing existing labels as much as possible. Always create a label as a sublabel, if no label applies, if the main label already exists, create the new label under the existing label, if no main label exists, create the label AI and create the new label under this label.\nLabel Creation:\n\nEnsure new labels align with the structure of existing ones, including capitalization, delimiters, and prefixes.\nExamples:\n\nIf the email subject is \"Project Alpha Update,\" assign to [Project Alpha] if it exists.\nFor \"New Vendor Inquiry,\" create \"Vendor Inquiry\" if no relevant label exists.\nOutcome:\nEmails are consistently categorized under the appropriate or newly created labels, maintaining Gmail's organizational structure.","maxIterations":5}},"id":"2958a6a5-581e-4357-9c89-71dd7aa01990","name":"Gmail labelling agent","type":"@n8n/n8n-nodes-langchain.agent","position":[672,-48],"notesInFlow":true,"retryOnFail":false,"typeVersion":1.7,"onError":"continueErrorOutput","notes":"Objective:\nAutomatically categorize incoming emails based on existing Gmail labels or create a new label if none match.\n\nTools:\n- Get message\n- Read all labels\n- Create label\n- Assign label to message\n\nInstructions:\n\nLabel Matching:\n\nAnalyze the email's subject, sender, recipient, keywords, and content.\nCompare with existing Gmail labels to find the most relevant match.\nLabel Assignment:\n\nAssign the email to the most appropriate existing label.`\nRemove the inbox label if the email is of less importance (like ads, promotions, aka \"Reclame\"), keep normal and important emails in the inbox.\nIf no suitable label exists, create a new label based on the existing labels. Try reusing existing labels as much as possible. Always create a label as a sublabel, if no label applies, if the main label already exists, create the new label under the existing label, if no main label exists, create the label AI and create the new label under this label.\nLabel Creation:\n\nEnsure new labels align with the structure of existing ones, including capitalization, delimiters, and prefixes.\nExamples:\n\nIf the email subject is \"Project Alpha Update,\" assign to [Project Alpha] if it exists.\nFor \"New Vendor Inquiry,\" create \"Vendor Inquiry\" if no relevant label exists.\nOutcome:\nEmails are consistently categorized under the appropriate or newly created labels, maintaining Gmail's organizational structure."},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $json.id }}"},"id":"3824e716-19a2-4f25-9e66-505d5ac23c06","name":"Window Buffer Memory","type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","position":[672,192],"typeVersion":1.3},{"parameters":{"amount":1},"id":"e50195ff-9aaf-4d72-9bd7-e72c1322b111","name":"Wait","type":"n8n-nodes-base.wait","position":[512,-48],"webhookId":"2066b863-4526-40cf-90aa-82229895a73c","typeVersion":1.1},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[544,160],"id":"d893684d-3460-469c-b922-d6dff766927a","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"sz3zC8TlAdWLdQVh","name":"Google Gemini(PaLM) Api account"}}}]},{"file_Name":"Salah_Ai_Agent.json","id":"meO-wdTpXnngzg_mLI20s","nodes":[]},{"file_Name":"Github_Commit.json","id":"y0Oy9VhrYo4VhM7rDza56","nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[0,0],"id":"192895fe-c3ab-48e3-855b-59e0a3658031","name":"When clicking ‘Execute workflow’"},{"parameters":{"assignments":{"assignments":[{"id":"6658c516-70e4-4167-ac1a-80e674536153","name":"currentDate","value":"={{ $json.currentDate }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[880,-32],"id":"1fd621d5-f3b1-4c37-a49f-b39b69b41240","name":"Edit Fields"},{"parameters":{"options":{}},"type":"n8n-nodes-base.dateTime","typeVersion":2,"position":[432,0],"id":"3603b8bc-b2d7-4f13-b09f-903e28f161ca","name":"Date & Time"},{"parameters":{"authentication":"oAuth2","resource":"file","operation":"list","owner":{"__rl":true,"value":"Alilacream","mode":"list","cachedResultName":"Alilacream","cachedResultUrl":"https://github.com/Alilacream"},"repository":{"__rl":true,"value":"AI-ML","mode":"list","cachedResultName":"AI-ML","cachedResultUrl":"https://github.com/Alilacream/AI-ML"}},"type":"n8n-nodes-base.github","typeVersion":1.1,"position":[1088,-32],"id":"0179d1a7-a675-478e-a310-c3fad30bf409","name":"List files","webhookId":"136c3d0f-ee84-42af-8a82-ecaa557402ce","credentials":{"githubOAuth2Api":{"id":"QvHCrp6mBHRMYkji","name":"GitHub account"}}},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"name"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1296,-32],"id":"819cf282-0037-492f-8e59-34afdfc1f6c1","name":"Aggregate"},{"parameters":{"filters":{},"requestOptions":{}},"type":"n8n-nodes-base.n8n","typeVersion":1,"position":[1616,-32],"id":"c6765546-be8b-4b1e-a6f7-7bab20aa2051","name":"Get many workflows","credentials":{"n8nApi":{"id":"WAcYApKJ2ZXEB96M","name":"an account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":3},"conditions":[{"id":"b928ffdc-7859-442f-a1af-c6a5004dbd41","leftValue":"={{ $json.isArchived }}","rightValue":"false","operator":{"type":"boolean","operation":"false","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.3,"position":[1872,-32],"id":"6d034ec4-c2e2-4796-b01f-3b6393eec9ae","name":"If"},{"parameters":{"operation":"toJson","options":{"fileName":"={{ $json.file_Name.replace(/\\\\s+/g, '-').toLowerCase() }}-{{ $json.id }}.json }}"}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[2352,-144],"id":"016a9b1f-dc1b-4868-b6c4-92250aafac0f","name":"Convert to File"},{"parameters":{"authentication":"oAuth2","resource":"file","owner":{"__rl":true,"value":"Alilacream","mode":"list","cachedResultName":"Alilacream","cachedResultUrl":"https://github.com/Alilacream"},"repository":{"__rl":true,"value":"AI-ML","mode":"list","cachedResultName":"AI-ML","cachedResultUrl":"https://github.com/Alilacream/AI-ML"},"filePath":"={{ $('Folder name').item.json.Folder_name }}","binaryData":true,"commitMessage":"=New Workflow Backup at time:{{ $('Date & Time').item.json.currentDate }} "},"type":"n8n-nodes-base.github","typeVersion":1.1,"position":[3088,144],"id":"64a04b62-5a23-46ea-b88f-b4578eae3076","name":"Create a file","webhookId":"ddc80128-64fb-4182-96ca-80bd2c48683b","credentials":{"githubOAuth2Api":{"id":"QvHCrp6mBHRMYkji","name":"GitHub account"}}},{"parameters":{"assignments":{"assignments":[{"id":"9fd406a2-f785-4636-bd70-3fd4168a3fcf","name":"Folder_name","value":"=Backup_{{ $json.currentDate }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[640,0],"id":"4a865147-7ec3-4232-ba93-08f7e082d568","name":"Folder name"},{"parameters":{"assignments":{"assignments":[{"id":"e1f90c17-bfb0-4611-a984-69ef105e902e","name":"file_Name","value":"={{ $json.name.trim() }}.json","type":"string"},{"id":"7d4fdd23-a323-4694-970c-4bc41fb16c87","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"8423b54e-2ac9-4fbf-8620-a74f8632906d","name":"nodes","value":"={{ $json.nodes }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[2112,-48],"id":"98756bf8-5b7e-49fb-86c1-1e55e212fb01","name":"Nodes&&Name"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":3},"conditions":[{"id":"4a0d622c-6f76-4547-9cd7-bbc48ec35f33","leftValue":"={{ $node['List files'].json.name  }}","rightValue":"={{ $binary.data.fileName }}","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.3,"position":[2816,128],"id":"6843edc0-3a77-45ac-b720-02de9d89fbdb","name":"If1"},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[2592,-144],"id":"7ee23376-6ea1-4f4d-852a-4268db5099dd","name":"Split into Batches"}]}]